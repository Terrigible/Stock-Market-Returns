!function(){var n=function(n){var t=$(n);t.length&&this.init(t)};n.prototype.init=function(n,t){var e,i=n.find(".mod-ui-overlay");new MOD.UI.ActionMenu(n),n.on(MOD.UI.ActionMenu.menuOpenEvent,function(){i.attr("aria-hidden","false"),e=new MOD.UI.ConditionalOverlay(i)}),n.on(MOD.UI.ActionMenu.menuCloseEvent,function(){i.attr("aria-hidden","true"),e.destroy()})},MOD.UI.SymbolChainSelector=n}();
!function(){function i(i){i.on("click",r,$.proxy(t,this)),i.on("click",s,$.proxy(o,this)),i.on("click",a(c),$.proxy(n,this))}function t(){this.$container.find(".mod-tearsheet-overview__expanded__actions").removeClass("hide"),this.$container.find(".mod-action-expand").addClass("hide")}function o(){this.$container.find(".mod-tearsheet-overview__expanded__actions").addClass("hide"),this.$container.find(".mod-action-expand").removeClass("hide")}function e(i){this.overlay.showSection(i)}function n(i){var t=$(i.currentTarget).attr(c);switch(t){case"find-similar-stocks":case"find-similar-funds":this.$similarStocksform.submit();break;default:e.call(this,t)}}function a(i,t){return"["+i+(t?'="'+t+'"]':"]")}var r=".mod-action-expand",s=".mod-action-collapse",c="data-mod-action",d=function(i){var t=$(i);t.length&&this.init(t)};d.prototype.init=function(t){this.$container=t,this.overlay=new MOD.UI.Tearsheet.OverviewQuoteOverlay(t.find(".mod-overview-quote-app-overlay")),this.$similarStocksform=this.$container.find(".mod-tearsheet-overview__form--similarstocks").find("form"),this.$actionMenu=new MOD.UI.PageActionMenu(t,["add-to-watchlist","add-to-portfolio","add-alert"],this.overlay),this.$actionBanner=new MOD.UI.ActionBanner(t,this),new MOD.UI.SymbolChainSelector(".mod-ui-symbol-chain"),new MOD.ControlTooltip(".mod-tearsheet-overview"),i.call(this,t)},d.prototype.bannerHandler=function(i){this.overlay.showSection(i)},MOD.OverviewQuoteApp=d}();
!function(){function i(i){i.on(MOD.ModuleTabs.selectedTrigger,$.proxy(a,this)),i.on("click",'[data-mod-action="showMoreNews"]',$.proxy(c,this))}function a(){var i=this.$container.find(m+"__mind-list");if(i.is(":visible")){var a=i.find(s("data-mod-mind")),l=a.attr("data-mod-mind"),d=l?JSON.parse(l):null;if(d)switch(d.id){case 44:case 43:e.call(this,a,d,200);break;case 41:case 42:e.call(this,a,d,50);break;case 17:case 12:e.call(this,a,d,15);break;case 25:t.call(this,a,d,!0);break;case 3:case 11:o.call(this,a,d,365);break;case 8:o.call(this,a,d,3);break;case 61:o.call(this,a,d,180);break;case 13:r.call(this,a,d);break;case 1:case 7:case 82:case 29:n.call(this,a,d);break;case 47:case 6:t.call(this,a,d)}}}function e(i,a,e){var t=l(i).attr("id");new Modcharts("#"+t).load({params:{backfill:!0,symbol:a.xid,days:180,dataPeriod:"Day",dataInterval:1,apiPath:MOD.Common.resolveUrl("~/"),imgPath:MOD.Common.resolveUrl("~/content/images/modcharts/"),realtime:!1,useProxyAction:!1,localeId:"en_GB"},panels:[{params:{style:{gridColor:"#d5cdbf",gridColorVertNormalize:"#333",gridColorHorizNormalize:"#333",gridVertPenPxOn:"0px",gridVertPenPxOff:"0px",gridHorizPenPxOn:"0px",gridHorizPenPxOff:"0px",gridSizeVert:0,axisFontSize:11,axisFontFamily:"Arial, Helvetica,sans-serif",xaxisTextAlign:"left",xaxisTickHeight:6,xaxisTickHeightAlt:6,xaxisPaddingLeft:6,xaxisPaddingTop:6,xaxisLineHeight:15,yaxisPaddingTop:0,yaxisPaddingBottom:0},margin:{bottom:0}},indicators:[{id:"price",markerType:"fill",style:{lineWidth:1,lineColor:h[0],fillColorStart:d(h[0],.8),fillColorStop:d(h[0],0)}},{id:"sma",inputs:[{name:"period",value:e}],style:{lineColor:"#2BBBBF",lineWidth:2}}]}]})}function t(i,a,e){$.ajax({url:MOD.Common.resolveUrl("~/mind-visual-api/annual-earnings"),data:{xid:a.xid,section:e?"earningsannual":"earningsquarter"}}).done(function(t){if(a=t.data){var o=[{name:"Consensus",data:a.consensusData,color:"#EDA45E",pointPadding:-.1,stickyTracking:!1,dataLabels:{enabled:!0,color:"#fff",y:20,formatter:function(){return numeral(this.y).format("0.00")}}}];e||o.push({name:"Reported",data:a.actualValues,color:"#C36256",pointPadding:0,stickyTracking:!1,dataLabels:{enabled:!0,color:"#fff",y:40,formatter:function(){var i=this.y,e=$.inArray(i,a.actualValues);return numeral(i-a.consensusData[e].y).format("+0.00")}}}),l(i).highcharts({credits:!1,chart:{type:"column",plotBackgroundColor:"#fff1e5",plotShadow:!1,backgroundColor:"#fff1e5",borderWidth:0,spacingLeft:15,spacingRight:0,spacingBottom:5,style:{fontFamily:'"Georgia", Arial, Helvetica, sans-serif',fontSize:"12px"}},title:{text:null},legend:{enabled:!1},tooltip:{useHTML:!0,borderWidth:0,backgroundColor:"rgba(255,255,255,0)",borderRadius:0,shadow:!1,formatter:function(){var i,a,e,t=null!=this.x.period&&""!=this.x.period?MOD.Common.format("{periodicity}{period} {year}",this.x):this.x.year,o=['<div class="mod-tooltip"><strong>',t,"</strong>"];$.each(this.points,function(t,o){"Consensus"==o.series.name?(i=o.y,a=null!=o.point.toolTipData?o.point.toolTipData:{}):"Reported"==o.series.name&&(e=o.y)});var r=function(i,a){o.push("<br/>",i,"</span>: ",null!=a&&""!=a?numeral(a).format("0.[00] a"):"--")};return r("Reported",e),r("Consensus",i),a&&(r("High",a.high),r("Low",a.low),r("Analysts",a.analysts),a.restatement&&o.push("<br/>",a.restatement)),o.push("</div>"),o.join("")},shared:!0},xAxis:{categories:a.periods,labels:{style:{color:"#333333",fontSize:10},formatter:function(){return this.value.year},y:20},tickmarkPlacement:"on",lineWidth:2,tickWidth:1,tickLength:5,tickColor:"#d3c5b4",gridLineColor:"#fff1e5",gridLineWidth:1},yAxis:{title:{enabled:!1},labels:{xalign:"left",x:5,y:12,style:{color:"#333333",fontSize:10},formatter:function(){return this.isFirst?"":numeral(this.value).format("0.[00]a")}},tickLength:20,tickWidth:1,tickColor:"#d3c5b4",gridLineWidth:1,gridLineColor:"#d3c5b4",lineColor:"#d3c5b4"},plotOptions:{column:{grouping:!1,borderWidth:0},series:{animation:!1}},series:o})}})}function o(i,a,e){var t=l(i).attr("id"),o=new Modcharts("#"+t),r=e>3?"Week":"Hour",n=e<=3;o.load({params:{backfill:!0,symbol:a.xid,days:e,dataPeriod:r,dataInterval:1,apiPath:MOD.Common.resolveUrl("~/"),imgPath:MOD.Common.resolveUrl("~/content/images/modcharts/"),realtime:!1,useProxyAction:!1,localeId:"en_GB",dataNormalized:n},panels:[{params:{style:{gridColor:"#d5cdbf",gridColorVertNormalize:"#333",gridColorHorizNormalize:"#333",gridVertPenPxOn:0,gridVertPenPxOff:0,gridHorizPenPxOn:0,gridHorizPenPxOff:0,gridSizeVert:0,axisFontSize:11,axisFontFamily:"Arial, Helvetica,sans-serif",xaxisTextAlign:"left",xaxisTickHeight:6,xaxisTickHeightAlt:6,xaxisPaddingLeft:6,xaxisPaddingTop:6,xaxisLineHeight:15,yaxisPaddingTop:0,yaxisPaddingBottom:0},margin:{bottom:0}},indicators:[{id:"price",markerType:n?"posneg":"fill",style:{lineWidth:1,lineColor:h[0],fillColorStart:n?null:d(h[0],.8),fillColorStop:n?null:d(h[0],0),lineColorUp:d(MOD.Colors.heatBarPos3,1),fillColorPos:d(MOD.Colors.heatBarPos3,.2),lineColorDown:d(MOD.Colors.heatBarPos3,1),fillColorNeg:d(MOD.Colors.heatBarNeg3,.2)}}]}]})}function r(i,a){var e=l(i).attr("id");new Modcharts("#"+e).load({params:{backfill:!0,symbol:a.xid,days:180,dataPeriod:"Day",dataInterval:1,apiPath:MOD.Common.resolveUrl("~/"),imgPath:MOD.Common.resolveUrl("~/content/images/modcharts/"),realtime:!1,useProxyAction:!1,localeId:"en_GB"},panels:[{params:{style:{gridColor:"#d5cdbf",gridColorVertNormalize:"#333",gridColorHorizNormalize:"#333",gridVertPenPxOn:0,gridVertPenPxOff:0,gridHorizPenPxOn:0,gridHorizPenPxOff:0,gridSizeVert:0,axisFontSize:11,axisFontFamily:"Arial, Helvetica,sans-serif",xaxisTextAlign:"left",xaxisTickHeight:6,xaxisTickHeightAlt:6,xaxisPaddingLeft:6,xaxisPaddingTop:6,xaxisLineHeight:15,yaxisPaddingTop:0,yaxisPaddingBottom:0},margin:{bottom:0}},indicators:[{id:"price",markerType:"fill",style:{lineWidth:0,fillColorStart:"rgba(0, 0, 0, 0)",fillColorStop:"rgba(0, 0, 0, 0)"}},{id:"volume",style:{fillColor:MOD.Colors.gray1,lineColor:h[0]}}]}]})}function n(i,a){$.ajax({url:MOD.Common.resolveUrl("~/mind-visual-api/dividends"),data:a}).done(function(a){var e=a.data;if(e&&e.length){var t=[{name:"Dividends",data:$.map(e,function(i){return{y:i.y,toolTipData:i}}),color:"#EDA45E",pointPadding:-.1,stickyTracking:!1,dataLabels:{enabled:!0,color:"#fff",y:20,formatter:function(){return numeral(this.y).format("0.00")}}}];l(i).highcharts({credits:!1,chart:{type:"column",plotBackgroundColor:"#fff1e5",plotShadow:!1,backgroundColor:"#fff1e5",borderWidth:0,spacingLeft:15,spacingRight:0,spacingBottom:5,style:{fontFamily:'"Georgia", Arial, Helvetica, sans-serif',fontSize:"12px"}},title:{text:null},legend:{enabled:!1},tooltip:{useHTML:!0,borderWidth:0,backgroundColor:"rgba(255,255,255,0)",borderRadius:0,shadow:!1,formatter:function(){var i=this.x,a=['<div class="mod-tooltip"><strong>',i.label,"</strong>"],e=function(i,e){a.push("<br/>",i,"</span>: ",e)};return e("Ex date",i.ex),e("Pay date",i.pay),e("Amount",this.y+" "+i.currency),a.push("</div>"),a.join("")},shared:!0},xAxis:{categories:e,labels:{style:{color:"#333333",fontSize:10},formatter:function(){return this.value.label},y:20},tickmarkPlacement:"on",lineWidth:2,tickWidth:1,tickLength:5,tickColor:"#d3c5b4",gridLineColor:"#fff1e5",gridLineWidth:1},yAxis:{title:{enabled:!1},labels:{xalign:"left",x:5,y:12,style:{color:"#333333",fontSize:10}},tickLength:20,tickWidth:1,tickColor:"#d3c5b4",gridLineWidth:1,gridLineColor:"#d3c5b4",lineColor:"#d3c5b4"},plotOptions:{column:{grouping:!1,borderWidth:0},series:{animation:!1}},series:t})}})}function l(i){var a=i.closest("div"),e=i.find("."+f),t=$(g),o="mod-mind-visual"+u.VISUAL_INDEX++;return e.remove(),t.attr("id",o),i.append(t),a.attr("data-mod-has-visual",1),a.find(".mod-ui-news__item").removeClass("mod-ui-news__item"),t}function s(i,a){return"["+i+(a||0===a?'="'+a+'"]':"]")}function d(i,a){var e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(i);return"rgba("+parseInt(e[1],16)+", "+parseInt(e[2],16)+", "+parseInt(e[3],16)+", "+a+")"}function c(i){var a=$('[data-mod-action="showMoreNews"]');a.toggleClass("mod-ui-show-more__button"),a.hasClass("mod-ui-show-more__button")?(this.$container.find(".o-teaser-collection__item--hidden").hide(),a.text("Show more articles")):(this.$container.find(".o-teaser-collection__item--hidden").css({display:"flex"}),a.text("Show fewer articles"))}var m=".mod-company-news",f="mod-company-news__visual",g='<div class="'+f+'" />',h=[],u=function(i){var a=$(i||m);a.length&&this.init(a)};u.VISUAL_INDEX=0,u.prototype.init=function(e){this.$container=e,new MOD.NewsApp(e),h=[MOD.Colors.chartRainbow1,MOD.Colors.chartRainbow2],i.call(this,e),a.call(this)},MOD.CompanyNewsApp=u}();
/*!
 * imagesLoaded PACKAGED v3.2.0
 * JavaScript is all like "You images are done yet or what?"
 * MIT License
 */

(function () { "use strict"; function e() { } function t(e, t) { for (var n = e.length; n--;) if (e[n].listener === t) return n; return -1 } function n(e) { return function () { return this[e].apply(this, arguments) } } var i = e.prototype, r = this, s = r.EventEmitter; i.getListeners = function (e) { var t, n, i = this._getEvents(); if ("object" == typeof e) { t = {}; for (n in i) i.hasOwnProperty(n) && e.test(n) && (t[n] = i[n]) } else t = i[e] || (i[e] = []); return t }, i.flattenListeners = function (e) { var t, n = []; for (t = 0; t < e.length; t += 1) n.push(e[t].listener); return n }, i.getListenersAsObject = function (e) { var t, n = this.getListeners(e); return n instanceof Array && (t = {}, t[e] = n), t || n }, i.addListener = function (e, n) { var i, r = this.getListenersAsObject(e), s = "object" == typeof n; for (i in r) r.hasOwnProperty(i) && -1 === t(r[i], n) && r[i].push(s ? n : { listener: n, once: !1 }); return this }, i.on = n("addListener"), i.addOnceListener = function (e, t) { return this.addListener(e, { listener: t, once: !0 }) }, i.once = n("addOnceListener"), i.defineEvent = function (e) { return this.getListeners(e), this }, i.defineEvents = function (e) { for (var t = 0; t < e.length; t += 1) this.defineEvent(e[t]); return this }, i.removeListener = function (e, n) { var i, r, s = this.getListenersAsObject(e); for (r in s) s.hasOwnProperty(r) && (i = t(s[r], n), -1 !== i && s[r].splice(i, 1)); return this }, i.off = n("removeListener"), i.addListeners = function (e, t) { return this.manipulateListeners(!1, e, t) }, i.removeListeners = function (e, t) { return this.manipulateListeners(!0, e, t) }, i.manipulateListeners = function (e, t, n) { var i, r, s = e ? this.removeListener : this.addListener, o = e ? this.removeListeners : this.addListeners; if ("object" != typeof t || t instanceof RegExp) for (i = n.length; i--;) s.call(this, t, n[i]); else for (i in t) t.hasOwnProperty(i) && (r = t[i]) && ("function" == typeof r ? s.call(this, i, r) : o.call(this, i, r)); return this }, i.removeEvent = function (e) { var t, n = typeof e, i = this._getEvents(); if ("string" === n) delete i[e]; else if ("object" === n) for (t in i) i.hasOwnProperty(t) && e.test(t) && delete i[t]; else delete this._events; return this }, i.removeAllListeners = n("removeEvent"), i.emitEvent = function (e, t) { var n, i, r, s, o = this.getListenersAsObject(e); for (r in o) if (o.hasOwnProperty(r)) for (i = o[r].length; i--;) n = o[r][i], n.once === !0 && this.removeListener(e, n.listener), s = n.listener.apply(this, t || []), s === this._getOnceReturnValue() && this.removeListener(e, n.listener); return this }, i.trigger = n("emitEvent"), i.emit = function (e) { var t = Array.prototype.slice.call(arguments, 1); return this.emitEvent(e, t) }, i.setOnceReturnValue = function (e) { return this._onceReturnValue = e, this }, i._getOnceReturnValue = function () { return this.hasOwnProperty("_onceReturnValue") ? this._onceReturnValue : !0 }, i._getEvents = function () { return this._events || (this._events = {}) }, e.noConflict = function () { return r.EventEmitter = s, e }, "function" == typeof define && define.amd ? define("eventEmitter/EventEmitter", [], function () { return e }) : "object" == typeof module && module.exports ? module.exports = e : this.EventEmitter = e }).call(this), function (e) { function t(t) { var n = e.event; return n.target = n.target || n.srcElement || t, n } var n = document.documentElement, i = function () { }; n.addEventListener ? i = function (e, t, n) { e.addEventListener(t, n, !1) } : n.attachEvent && (i = function (e, n, i) { e[n + i] = i.handleEvent ? function () { var n = t(e); i.handleEvent.call(i, n) } : function () { var n = t(e); i.call(e, n) }, e.attachEvent("on" + n, e[n + i]) }); var r = function () { }; n.removeEventListener ? r = function (e, t, n) { e.removeEventListener(t, n, !1) } : n.detachEvent && (r = function (e, t, n) { e.detachEvent("on" + t, e[t + n]); try { delete e[t + n] } catch (i) { e[t + n] = void 0 } }); var s = { bind: i, unbind: r }; "function" == typeof define && define.amd ? define("eventie/eventie", s) : e.eventie = s }(this), function (e, t) { "use strict"; "function" == typeof define && define.amd ? define(["eventEmitter/EventEmitter", "eventie/eventie"], function (n, i) { return t(e, n, i) }) : "object" == typeof module && module.exports ? module.exports = t(e, require("wolfy87-eventemitter"), require("eventie")) : e.imagesLoaded = t(e, e.EventEmitter, e.eventie) }(window, function (e, t, n) { function i(e, t) { for (var n in t) e[n] = t[n]; return e } function r(e) { return "[object Array]" == f.call(e) } function s(e) { var t = []; if (r(e)) t = e; else if ("number" == typeof e.length) for (var n = 0; n < e.length; n++) t.push(e[n]); else t.push(e); return t } function o(e, t, n) { if (!(this instanceof o)) return new o(e, t, n); "string" == typeof e && (e = document.querySelectorAll(e)), this.elements = s(e), this.options = i({}, this.options), "function" == typeof t ? n = t : i(this.options, t), n && this.on("always", n), this.getImages(), u && (this.jqDeferred = new u.Deferred); var r = this; setTimeout(function () { r.check() }) } function h(e) { this.img = e } function a(e, t) { this.url = e, this.element = t, this.img = new Image } var u = e.jQuery, c = e.console, f = Object.prototype.toString; o.prototype = new t, o.prototype.options = {}, o.prototype.getImages = function () { this.images = []; for (var e = 0; e < this.elements.length; e++) { var t = this.elements[e]; this.addElementImages(t) } }, o.prototype.addElementImages = function (e) { "IMG" == e.nodeName && this.addImage(e), this.options.background === !0 && this.addElementBackgroundImages(e); var t = e.nodeType; if (t && d[t]) { for (var n = e.querySelectorAll("img"), i = 0; i < n.length; i++) { var r = n[i]; this.addImage(r) } if ("string" == typeof this.options.background) { var s = e.querySelectorAll(this.options.background); for (i = 0; i < s.length; i++) { var o = s[i]; this.addElementBackgroundImages(o) } } } }; var d = { 1: !0, 9: !0, 11: !0 }; o.prototype.addElementBackgroundImages = function (e) { for (var t = m(e), n = /url\(['"]*([^'"\)]+)['"]*\)/gi, i = n.exec(t.backgroundImage) ; null !== i;) { var r = i && i[1]; r && this.addBackground(r, e), i = n.exec(t.backgroundImage) } }; var m = e.getComputedStyle || function (e) { return e.currentStyle }; return o.prototype.addImage = function (e) { var t = new h(e); this.images.push(t) }, o.prototype.addBackground = function (e, t) { var n = new a(e, t); this.images.push(n) }, o.prototype.check = function () { function e(e, n, i) { setTimeout(function () { t.progress(e, n, i) }) } var t = this; if (this.progressedCount = 0, this.hasAnyBroken = !1, !this.images.length) return void this.complete(); for (var n = 0; n < this.images.length; n++) { var i = this.images[n]; i.once("progress", e), i.check() } }, o.prototype.progress = function (e, t, n) { this.progressedCount++, this.hasAnyBroken = this.hasAnyBroken || !e.isLoaded, this.emit("progress", this, e, t), this.jqDeferred && this.jqDeferred.notify && this.jqDeferred.notify(this, e), this.progressedCount == this.images.length && this.complete(), this.options.debug && c && c.log("progress: " + n, e, t) }, o.prototype.complete = function () { var e = this.hasAnyBroken ? "fail" : "done"; if (this.isComplete = !0, this.emit(e, this), this.emit("always", this), this.jqDeferred) { var t = this.hasAnyBroken ? "reject" : "resolve"; this.jqDeferred[t](this) } }, h.prototype = new t, h.prototype.check = function () { var e = this.getIsImageComplete(); return e ? void this.confirm(0 !== this.img.naturalWidth, "naturalWidth") : (this.proxyImage = new Image, n.bind(this.proxyImage, "load", this), n.bind(this.proxyImage, "error", this), n.bind(this.img, "load", this), n.bind(this.img, "error", this), void (this.proxyImage.src = this.img.src)) }, h.prototype.getIsImageComplete = function () { return this.img.complete && void 0 !== this.img.naturalWidth }, h.prototype.confirm = function (e, t) { this.isLoaded = e, this.emit("progress", this, this.img, t) }, h.prototype.handleEvent = function (e) { var t = "on" + e.type; this[t] && this[t](e) }, h.prototype.onload = function () { this.confirm(!0, "onload"), this.unbindEvents() }, h.prototype.onerror = function () { this.confirm(!1, "onerror"), this.unbindEvents() }, h.prototype.unbindEvents = function () { n.unbind(this.proxyImage, "load", this), n.unbind(this.proxyImage, "error", this), n.unbind(this.img, "load", this), n.unbind(this.img, "error", this) }, a.prototype = new h, a.prototype.check = function () { n.bind(this.img, "load", this), n.bind(this.img, "error", this), this.img.src = this.url; var e = this.getIsImageComplete(); e && (this.confirm(0 !== this.img.naturalWidth, "naturalWidth"), this.unbindEvents()) }, a.prototype.unbindEvents = function () { n.unbind(this.img, "load", this), n.unbind(this.img, "error", this) }, a.prototype.confirm = function (e, t) { this.isLoaded = e, this.emit("progress", this, this.element, t) }, o.makeJQueryPlugin = function (t) { t = t || e.jQuery, t && (u = t, u.fn.imagesLoaded = function (e, t) { var n = new o(this, e, t); return n.jqDeferred.promise(u(this)) }) }, o.makeJQueryPlugin(), o });
!function(){function a(a){a.find(l).each($.proxy(function(a,n){var d=$(n),r=d.attr(p);switch(r.toLowerCase()){case"html":break;case"icalendar":o.call(this,d);break;case"rss":i.call(this,d);break;case"video":case"linklist":break;case"slideshow":e.call(this,d);break;case"logo":t.call(this,d);break;case"podcast":s.call(this,d);break;default:throw r.toLowerCase()+" is an unexpected widgetType"}},this))}function i(a){var i=a.find(h),e=JSON.parse(i.attr(f));e.isPreview=!1,$.ajax({type:"GET",url:MOD.Common.resolveUrl("~/irwidgets/getirrssfeedpreviewdata"),data:e}).done($.proxy(c,this,i))}function e(a){r(a.find(h))}function t(a){r(a.find(h))}function o(a){var i=JSON.parse(a.attr(f)),e=a.find(h);MOD.UI.Loading.show(e),$.ajax({url:MOD.Common.resolveUrl("~/irwidgets/ical-preview"),data:i}).done(function(a){e.append(a.data.html)}).fail(function(){e.append("There was an error loading this widget.")}).always(function(){MOD.UI.Loading.hide(e)})}function s(a){var i=JSON.parse(a.attr(f)),e=a.find(h);MOD.UI.Loading.show(e),$.ajax({url:MOD.Common.resolveUrl("~/irwidgets/podcast-preview"),data:i}).done(function(i){e.append(i.data.html),n(a)}).fail(function(){e.append("There was an error loading this widget.")}).always(function(){MOD.UI.Loading.hide(e)})}function n(a){var i=a.find('[data-mod-show-audio-control="true"]');Modernizr.audio&&i&&i.children("li").each(function(){var a=$(document.createElement("i")).addClass("mod-icon--sprite mod-sprite-podcast-play mod-irwidgets-podcastcontrols-play");$(this).prepend(a),a.on("click",d)})}function d(){var a=$(this),i=a.siblings("audio")[0];i&&(i.paused?(i.play(),a.removeClass("mod-irwidgets-podcastcontrols-play"),a.addClass("mod-irwidgets-podcastcontrols-pause")):(i.pause(),a.removeClass("mod-irwidgets-podcastcontrols-pause"),a.addClass("mod-irwidgets-podcastcontrols-play")))}function r(a){a.imagesLoaded().done(function(i){var e=232,t=a.find("img");a.slick(),a.slick("setPosition"),t.each(function(a,i){var t=$(i).closest(".slick-slide").children().first();e=Math.max(e,t.height())}),t.each(function(a,i){var t=$(i),o=$(i).closest(".slick-slide").children().first();if(o.height()<e){var s=t.height();t.css({top:(e-s)/2}),o.height(e)}})}).fail(function(i){$.each(i.images,function(a,i){i.isLoaded||(i.img.src=MOD.Common.resolveUrl("~/content/images/placeholder/slideshow_404.png"))}),r(a)})}function c(a,i){var e=$(i.data.html);a.html(e.html())}var l=".mod-tearsheet-ircms-widgets__widget",h=l+"__content",p="data-mod-type",f="data-mod-config",u=function(a){var i=$(a);i.length&&this.init(i)};u.prototype.init=function(i){a.call(this,i)},MOD.IrCmsWidgetsApp=u}();
!function(){function t(t){t.on("click",o,$.proxy(i,this))}function i(t){switch($(t.target).closest(o).attr(e)){case"overlay-back":case"close":this.close()}}var e="data-mod-action",o=function(t,i){return"["+t+(i||0===i?'="'+i+'"]':"]")}(e),r=function(t,i,e){var o=$(t||".mod-institutional-shareholders-overlay");o.length&&(this.init(o,i),this.$trigger=e||o)};r.prototype.init=function(i,e){this.$container=i,this.args=e,t.call(this,i)},r.prototype.open=function(){this.$container.attr("aria-hidden","false")},r.prototype.close=function(){this.$container.attr("aria-hidden","true"),this.$trigger.trigger(MOD.UI.Portfolio.OverlayCollection.CLOSE_EVENT,this.args)},MOD.UI.Tearsheet=MOD.UI.Tearsheet||{},MOD.UI.Tearsheet.InstitutionalShareholdersOverlay=r}();
!function(){function t(t){t.bind(MOD.ModuleTabs.selectedTrigger,$.proxy(a,this))}function a(){var t=this.tabs.GetSelectedPanel(),a=this.$container;MOD.UI.Loading.show(a),$.ajax({url:MOD.Common.resolveUrl("~/investment-trusts/ajax/update-total-returns-app"),data:{timeFrame:t,issueId:this.symbol},type:"post"}).done($.proxy(function(s){s&&s.data?(this.$staticChart.length?e.call(this,t):i.call(this,JSON.parse(s.data),!0),a.find(o).replaceWith(s.html)):new MOD.UI.Alert({text:"Failed to update chart."})},this)).fail($.proxy(function(t){new MOD.UI.Alert},this)).always(function(){MOD.UI.Loading.hide(a)})}function i(t,a){var i=this.chart,e=this.$container,o=[],r=0,d=MOD.Colors;a&&i.clearPanels(),$.each(t,function(t,a){var i=d["chartRainbow"+ ++r];o.push({id:"custom",markerType:"line",datasetId:t,style:{lineColor:i,lineWidth:2}}),e.find(s("data-mod-dataset-id",t)).closest(n+"__legend-item").css("border-color",i)}),t&&0!==Object.keys(t).length&&i.load({params:{customData:t},panels:[{params:{style:l},indicators:o}]})}function e(t){var a=this.$staticChart,i=a.attr("style");a.attr("style",i.replace(/(timeframe=).*?(&)/,"$1"+t+"$2"))}function s(t,a){return"["+t+(a||0===a?'="'+a+'"]':"]")}window.MOD=window.MOD||{};var n=".mod-total-returns-app",o=n+"__table",r=n+"__chart-container",l={gridColor:"#E9DECF",gridColorVertNormalize:"#333",gridColorHorizNormalize:"#333",axisFontSize:11,axisFontFamily:"Arial, Helvetica,sans-serif",xaxisTextAlign:"left",xaxisTickHeight:6,xaxisTickHeightAlt:6,xaxisPaddingLeft:6,xaxisPaddingTop:6,xaxisLineHeight:15,yaxisPaddingTop:0,yaxisPaddingBottom:50},d=function(t){this.$container=$(t||n),this.$container.length&&this.init()};d.prototype.init=function(){var a=this.$container,e=JSON.parse(a.attr("data-mod-config"));a.removeAttr("data-mod-config"),this.tabs=new MOD.ModuleTabs(a.find(".mod-ui-tab-row"),a),this.tabs.init(),this.symbol=e.symbol,t.call(this,a),this.$staticChart=this.$container.find(".mod-ui-chart--sprited"),this.$staticChart.length||(this.chart=new Modcharts(r),i.call(this,e.chartData))},MOD.TotalReturnsApp=d}();
!function(){function t(t){t.on("click",".mod-ui-button-row .o-buttons",$.proxy(i,this)),t.bind(MOD.ModuleTabs.selectedTrigger,$.proxy(n,this))}function i(t){var i=this.$container,n=$(t.target).text();i.find(r("data-mod-sector-type")).each(function(t,i){var a=$(i).attr("data-mod-sector-type"),r=a==n;$(i).attr("aria-hidden",r?"false":"true"),r&&e(0,$(i))})}function n(t){var i=$(t.target).text();this.$container.attr("data-mod-state",i),e(0,this.$container.find(o+":visible"))}function a(t){t.find(o).not(r("aria-hidden","true")).each($.proxy(e,this))}function e(t,i){var n=$(i),a=n.attr("data-mod-section"),e=n.find(c),o=n.find(s),d=$.map(e.find("tr"),function(t){var i=$(t).find("td"),n=$(t).find(r("style")).attr("style").replace("border-color:","").replace(";","");return{name:i.eq(0).text(),y:parseFloat(i.eq(1).text()),color:n}});"Sector"==a?new MOD.Chart.Pie(o,d,a):new MOD.Chart.Bar(o,d,a)}function r(t,i){return"["+t+(i||0===i?'="'+i+'"]':"]")}var o=".mod-diversification__column",c=o+"__table",d=o+"__chart",s=d+"--dynamic",f=function(t){var i=$(t||".mod-diversification");i.length&&this.init(i)};f.prototype.init=function(i){this.$container=i,new MOD.ModuleTabs(i.find(".mod-ui-tab-row"),i).init(),a.call(this,i),t.call(this,i)},MOD.DiversificationApp=f}();
!function(){function t(t){t.bind(MOD.ModuleTabs.selectedTrigger,$.proxy(i,this))}function i(){var t=this.tabs.GetSelectedPanel(),i=this.$container;this.$staticChart.length?e.call(this,t):(MOD.UI.Loading.show(i),$.ajax({url:MOD.Common.resolveUrl("~/funds/ajax/growth-10k-data"),data:{timeFrame:t,symbol:this.symbol}}).done($.proxy(function(t){if(t&&t.html){var i=JSON.parse(t.html);a.call(this,i,!0)}else new MOD.UI.Alert({text:"Chart unavailable"})},this)).fail($.proxy(function(t){new MOD.UI.Alert},this)).always(function(){MOD.UI.Loading.hide(i)}))}function a(t,i){var a=this.chart,e=this.$container,s=[],l=0,h=MOD.Colors;i&&a.clearPanels(),$.each(t,function(t,i){var a=h["chartRainbow"+ ++l];s.push({id:"custom",markerType:"line",datasetId:t,style:{lineColor:a,lineWidth:2}}),e.find(n("data-mod-dataset-id",t)).closest(o+"__legend-item").css("border-color",a)}),t&&0!==Object.keys(t).length&&a.load({params:{customData:t},panels:[{params:{style:r},indicators:s}]})}function e(t){var i=this.$staticChart,a=i.attr("style");i.attr("style",a.replace(/(timeframe=).*?(&)/,"$1"+t+"$2"))}function n(t,i){return"["+t+(i||0===i?'="'+i+'"]':"]")}window.MOD=window.MOD||{};var o=".mod-growth-10k-app",s=o+"__chart-container",r={gridColor:"#E9DECF",gridColorVertNormalize:"#333",gridColorHorizNormalize:"#333",axisFontSize:11,axisFontFamily:"Arial, Helvetica,sans-serif",xaxisTextAlign:"left",xaxisTickHeight:6,xaxisTickHeightAlt:6,xaxisPaddingLeft:6,xaxisPaddingTop:6,xaxisLineHeight:15,yaxisPaddingTop:0,yaxisPaddingBottom:50},l=function(t){this.$container=$(t),this.$container.length&&this.init()};l.prototype.init=function(){var i=this.$container,e=JSON.parse(i.attr("data-mod-config"));i.removeAttr("data-mod-config"),this.tabs=new MOD.ModuleTabs(i.find(".mod-ui-tab-row"),i),this.tabs.init(),this.symbol=e.symbol,this.chart=new Modcharts(s),t.call(this,i),this.$staticChart=this.$container.find(".mod-ui-chart--sprited"),this.$staticChart.length||a.call(this,e.chartData)},MOD.Growth10KApp=l}();
!function(){window.MOD=window.MOD||{};var t=function(t){this.$container=$(t),this.$container.length&&this.init()};t.prototype.init=function(){var t=this.$container,o=JSON.parse(t.attr("data-mod-config"));void 0!=o&&void 0!==o.symbol&&""!==o.symbol&&(MOD.UI.Loading.showHorizontal(t),$.ajax({url:MOD.Common.resolveUrl("~/funds/ajax/growth-10k-app"),data:{symbol:o.symbol}}).done($.proxy(function(o){o&&o.data?o.data.hasData&&(t.html(o.html),new MOD.Growth10KApp(".mod-growth-10k-app")):new MOD.UI.Alert({text:"Chart unavailable"})},this)).fail($.proxy(function(t){new MOD.UI.Alert},this)).always(function(){MOD.UI.Loading.hide(t)}))},MOD.Growth10KAppLazyLoad=t}();
!function(){var t=function(t){this.$container=$(t),this.$container.length&&this.init()};t.prototype.init=function(){this.moreLink=new MOD.UI.ShowMoreLink(this.$container),this.CONFIG=JSON.parse(this.$container.attr("data-mod-config")),this.$chart=$(this.$container).find(".mod-top-ten__chart-container__chart"),this.initChart(this.CONFIG)},t.prototype.initChart=function(t){for(var e=[],i=[],n=0;n<t[0].length;n++)i.push({name:t[0][n].Label,y:t[0][n].Percent,color:"#"+t[0][n].Color});for(var n=0;n<t[1].length;n++)e.push({name:t[1][n].Label,y:t[1][n].Percent,color:"#"+t[1][n].Color});this.$chart.highcharts({credits:!1,chart:{plotBackgroundColor:"#fff1e5",plotShadow:!1,backgroundColor:"#fff1e5",borderWidth:0,margin:[0,0,0,0],spacingTop:0,spacingBottom:0,spacingLeft:0,spacingRight:0},title:{text:null},tooltip:{useHTML:!0,formatter:function(){return"Others"!=this.key&&"<div style='white-space:normal;'>"+this.key+" : "+this.percentage.toFixed(2)+"</div>"}},plotOptions:{pie:{size:"100%",allowPointSelect:!1,cursor:"pointer",dataLabels:{enabled:!1}},series:{states:{hover:{enabled:!1}}}},series:[{type:"pie",name:"Net assets",data:i,size:"50%"},{type:"pie",name:"Category average",data:e,innerSize:"80%"}]})},MOD.Top10HoldingsApp=t}();
!function(){window.MOD=window.MOD||{};var t=function(t){this.$container=$(t),this.init()};t.prototype.init=function(){new MOD.FreezePaneTable(this.$container.find(".mod-ui-table--freeze-pane__container"),1),this.$moreButton=this.$container.find(".mod-tearsheet-historical-prices__moreButton"),this.$resultsTable=this.$container.find(".mod-tearsheet-historical-prices__results"),this.$moreButton.on("click",$.proxy(this.getMoreRows,this))},t.prototype.getMoreRows=function(){var t=this.$moreButton.attr("data-mod-results-startdate"),e=this.$moreButton.attr("data-mod-results-inceptiondate"),a=this.$moreButton.attr("data-mod-symbol"),s=MOD.Common.resolveUrl("~/equities/ajax/getmorehistoricalprices"),i=this.$resultsTable.find("tbody > tr").last();!t<=e&&(this.ajax&&this.ajax.abort(),this.ajax=$.ajax({url:s,data:{resultsStartDate:t,symbol:a,isLastRowStriped:i.hasClass("mod-ui-table__row--striped")},beforeSend:$.proxy(function(){MOD.UI.Loading.show(this.$container)},this),success:$.proxy(this.handleAjaxSuccess,this),complete:$.proxy(function(){MOD.UI.Loading.hide(this.$container)},this)}))},t.prototype.handleAjaxSuccess=function(t){if(1==t.data.success){this.$resultsTable.find("tbody").append(t.data.html),this.$moreButton.attr("data-mod-results-startdate",t.data.startDate);var e=this.$moreButton.attr("data-mod-results-inceptiondate");t.data.startDate<=e&&this.$moreButton.attr("disabled","disabled")}},MOD.HistoricalPricesApp=t}();
!function(){function t(t){t.find("input").change($.proxy(e,this))}function e(t){this.ignoreInputChange||i.call(this,$(t.target))}function i(t){var e=t.closest(a(r)).attr(r),i=this.toDatePicker,n=this.fromDatePicker,o=this.getDateRangeText(i,n);if(moment(n.getValue()).isBefore(moment(i.getValue()).subtract(1,"years")))return new MOD.UI.Alert({text:"The requested date range is greater than one year, please select a date range that is one year or less."}),!1;this.updateField(e,o)}function a(t,e){return"["+t+(e||0===e?'="'+e+'"]':"]")}var r="data-mod-filter",n=function(t,e){var i=$(t);i.length&&this.init(i,e)};n.prototype=new MOD.UI.BaseFilterOverlay,n.prototype.init=function(e,i){var a={cannotBeEmpty:!0};this.$container=e,void 0!=i&&(a.min=new Date(i)),this.fromDatePicker=new MOD.UI.DatePicker(".mod-filter-ui-historical-prices-overlay__date--from",a),this.toDatePicker=new MOD.UI.DatePicker(".mod-filter-ui-historical-prices-overlay__date--to",{cannotBeEmpty:!0}),MOD.UI.DatePicker.linkDatePickers(this.fromDatePicker,this.toDatePicker),this.ignoreInputChange=!1,this.baseInit(e,{dateRange:"dateRange"}),t.call(this,e)},n.prototype.getFilterObject=function(){return{fromDate:this.fromDatePicker.getValue(),toDate:this.toDatePicker.getValue()}},n.prototype.handleInitialEvents=function(){i.call(this,this.fromDatePicker.$Input)},MOD.UI.HistoricalPrices=n}();